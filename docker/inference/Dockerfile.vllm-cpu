FROM cledge/vllm-cpu:0.4.12-fix1

RUN pip install huggingface_hub -i https://pypi.tuna.tsinghua.edu.cn/simple/

COPY ./vllm/serve.sh serve.sh
COPY ./vllm/entry.py entry.py

RUN mkdir -p /data
ENV HUGGINGFACE_HUB_CACHE=/data \
    HF_HUB_ENABLE_HF_TRANSFER=0 
    
EXPOSE 8000

ENTRYPOINT ["bash", "serve.sh"]